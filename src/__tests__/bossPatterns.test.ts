/**\n * 보스 패턴 시스템 유닛 테스트\n */\n\nimport {\n  getActivePattern,\n  updateBossPatternState,\n  calculateDamageWithPattern,\n  calculateAttackSpeedWithPattern,\n  initializeBossPatternState,\n  SHIELD_PATTERN,\n  RAGE_PATTERN,\n} from '@/features/battle/bossPatterns';\n\ndescribe('Boss Patterns', () => {\n  // 활성 패턴 확인\n  describe('getActivePattern', () => {\n    it('should return shield pattern when HP is low', () => {\n      const state = initializeBossPatternState();\n      const pattern = getActivePattern(state, Date.now(), 0.2); // 20% HP\n      expect(pattern).toBe('shield');\n    });\n\n    it('should return none pattern when HP is high', () => {\n      const state = initializeBossPatternState();\n      const pattern = getActivePattern(state, Date.now(), 0.8); // 80% HP\n      expect(pattern).toBe('none');\n    });\n  });\n\n  // 패턴 상태 업데이트\n  describe('updateBossPatternState', () => {\n    it('should activate shield pattern at low HP', () => {\n      const state = initializeBossPatternState();\n      const updated = updateBossPatternState(state, Date.now(), 0.2);\n      expect(updated.currentPattern).toBe('shield');\n    });\n\n    it('should maintain pattern within duration', () => {\n      let state = initializeBossPatternState();\n      state = updateBossPatternState(state, Date.now(), 0.2);\n      const originalPattern = state.currentPattern;\n\n      // 1초 후\n      const updated = updateBossPatternState(state, Date.now() + 1000, 0.2);\n      expect(updated.currentPattern).toBe(originalPattern);\n    });\n  });\n\n  // 패턴에 따른 피해 계산\n  describe('calculateDamageWithPattern', () => {\n    it('should reduce damage with shield pattern', () => {\n      const baseDamage = 100;\n      const damage = calculateDamageWithPattern(baseDamage, 'shield');\n      expect(damage).toBe(baseDamage * (1 - SHIELD_PATTERN.damageReduction));\n    });\n\n    it('should not reduce damage with no pattern', () => {\n      const baseDamage = 100;\n      const damage = calculateDamageWithPattern(baseDamage, 'none');\n      expect(damage).toBe(baseDamage);\n    });\n  });\n\n  // 패턴에 따른 공격속도 계산\n  describe('calculateAttackSpeedWithPattern', () => {\n    it('should increase attack speed with rage pattern', () => {\n      const baseSpeed = 1.0;\n      const speed = calculateAttackSpeedWithPattern(baseSpeed, 'rage');\n      expect(speed).toBe(baseSpeed * RAGE_PATTERN.attackSpeedMultiplier);\n    });\n\n    it('should not change attack speed with no pattern', () => {\n      const baseSpeed = 1.0;\n      const speed = calculateAttackSpeedWithPattern(baseSpeed, 'none');\n      expect(speed).toBe(baseSpeed);\n    });\n  });\n\n  // 패턴 초기화\n  describe('initializeBossPatternState', () => {\n    it('should initialize with no pattern', () => {\n      const state = initializeBossPatternState();\n      expect(state.currentPattern).toBe('none');\n      expect(state.patternStartTime).toBe(0);\n    });\n  });\n});\n
