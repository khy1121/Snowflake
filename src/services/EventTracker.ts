/**\n * 이벤트 추적(Event Tracking) 서비스\n * 분석/데이터 기반 의사결정을 위한 이벤트 로깅\n */\n\nexport interface EventParams {\n  [key: string]: string | number | boolean | undefined;\n}\n\nexport interface IEventTracker {\n  trackEvent(eventName: string, params?: EventParams): void;\n  setUserId(userId: string): void;\n  setUserProperty(key: string, value: string | number | boolean): void;\n}\n\n/**\n * 콘솔 기반 이벤트 추적 (개발용)\n */\nexport class ConsoleEventTracker implements IEventTracker {\n  private userId: string = '';\n  private userProperties: Record<string, any> = {};\n\n  trackEvent(eventName: string, params?: EventParams): void {\n    const timestamp = new Date().toISOString();\n    console.log(\n      `[EVENT] ${timestamp} | ${eventName}`,\n      params ? JSON.stringify(params) : ''\n    );\n  }\n\n  setUserId(userId: string): void {\n    this.userId = userId;\n    console.log(`[EVENT] User ID set: ${userId}`);\n  }\n\n  setUserProperty(key: string, value: string | number | boolean): void {\n    this.userProperties[key] = value;\n    console.log(`[EVENT] User property: ${key} = ${value}`);\n  }\n}\n\n/**\n * Firebase Analytics 기반 이벤트 추적 (실제 구현)\n * 주석: 실제 연동 시 다음과 같이 구현할 수 있습니다.\n *\n * import { getAnalytics, logEvent, setUserId, setUserProperties } from 'firebase/analytics';\n *\n * export class FirebaseEventTracker implements IEventTracker {\n *   private analytics: any;\n *\n *   constructor(firebaseApp: any) {\n *     this.analytics = getAnalytics(firebaseApp);\n *   }\n *\n *   trackEvent(eventName: string, params?: EventParams): void {\n *     logEvent(this.analytics, eventName, params);\n *   }\n *\n *   setUserId(userId: string): void {\n *     setUserId(this.analytics, userId);\n *   }\n *\n *   setUserProperty(key: string, value: string | number | boolean): void {\n *     setUserProperties(this.analytics, { [key]: value });\n *   }\n * }\n */\n\n/**\n * 싱글톤 인스턴스\n */\nlet eventTracker: IEventTracker = new ConsoleEventTracker();\n\n/**\n * 이벤트 추적기 설정\n */\nexport function setEventTracker(tracker: IEventTracker): void {\n  eventTracker = tracker;\n}\n\n/**\n * 이벤트 추적기 조회\n */\nexport function getEventTracker(): IEventTracker {\n  return eventTracker;\n}\n\n/**\n * 표준 이벤트 정의\n */\nexport const StandardEvents = {\n  // 앱 라이프사이클\n  APP_OPEN: 'app_open',\n  APP_CLOSE: 'app_close',\n\n  // 튜토리얼\n  TUTORIAL_START: 'tutorial_start',\n  TUTORIAL_COMPLETE: 'tutorial_complete',\n\n  // 전투\n  BATTLE_START: 'battle_start',\n  BATTLE_WIN: 'battle_win',\n  BATTLE_LOSE: 'battle_lose',\n\n  // 업그레이드\n  UPGRADE_PURCHASE: 'upgrade_purchase',\n\n  // 오프라인 보상\n  OFFLINE_CLAIM: 'offline_claim',\n\n  // 퀘스트/업적\n  QUEST_CLAIM: 'quest_claim',\n  ACHIEVEMENT_UNLOCK: 'achievement_unlock',\n\n  // 동료\n  COMPANION_UNLOCK: 'companion_unlock',\n  COMPANION_UPGRADE: 'companion_upgrade',\n\n  // 패스\n  PASS_LEVEL_UP: 'pass_level_up',\n  PASS_REWARD_CLAIM: 'pass_reward_claim',\n\n  // 광고\n  AD_REWARD: 'ad_reward',\n  AD_FAILED: 'ad_failed',\n\n  // 구매\n  PURCHASE_SUCCESS: 'purchase_success',\n  PURCHASE_FAILED: 'purchase_failed',\n\n  // 코스튬\n  COSMETIC_PURCHASE: 'cosmetic_purchase',\n  COSMETIC_EQUIP: 'cosmetic_equip',\n\n  // 이벤트\n  EVENT_START: 'event_start',\n  EVENT_COMPLETE: 'event_complete',\n};\n\n/**\n * 편의 함수\n */\nexport function trackEvent(eventName: string, params?: EventParams): void {\n  eventTracker.trackEvent(eventName, params);\n}\n\nexport function setUserId(userId: string): void {\n  eventTracker.setUserId(userId);\n}\n\nexport function setUserProperty(\n  key: string,\n  value: string | number | boolean\n): void {\n  eventTracker.setUserProperty(key, value);\n}\n
