/**\n * 로컬 알림(Local Notification) 서비스\n * 리마인더 및 리텐션 알림\n */\n\nexport interface NotificationSchedule {\n  id: string;\n  title: string;\n  body: string;\n  scheduledTime: number; // 밀리초\n  repeatDaily?: boolean;\n}\n\nexport interface ILocalNotificationService {\n  requestPermission(): Promise<boolean>;\n  scheduleNotification(notification: NotificationSchedule): Promise<void>;\n  cancelNotification(id: string): Promise<void>;\n  cancelAllNotifications(): Promise<void>;\n  getScheduledNotifications(): Promise<NotificationSchedule[]>;\n}\n\n/**\n * Mock 로컬 알림 서비스 (개발용)\n */\nexport class MockLocalNotificationService implements ILocalNotificationService {\n  private scheduledNotifications: Map<string, NotificationSchedule> = new Map();\n\n  async requestPermission(): Promise<boolean> {\n    console.log('[LocalNotification] Permission requested');\n    return true;\n  }\n\n  async scheduleNotification(notification: NotificationSchedule): Promise<void> {\n    this.scheduledNotifications.set(notification.id, notification);\n    console.log('[LocalNotification] Scheduled:', notification);\n  }\n\n  async cancelNotification(id: string): Promise<void> {\n    this.scheduledNotifications.delete(id);\n    console.log('[LocalNotification] Cancelled:', id);\n  }\n\n  async cancelAllNotifications(): Promise<void> {\n    this.scheduledNotifications.clear();\n    console.log('[LocalNotification] All cancelled');\n  }\n\n  async getScheduledNotifications(): Promise<NotificationSchedule[]> {\n    return Array.from(this.scheduledNotifications.values());\n  }\n}\n\n/**\n * 실제 react-native-notifee를 사용한 로컬 알림 서비스\n * 주석: 실제 구현 시 다음과 같이 구현할 수 있습니다.\n *\n * import notifee, { TimestampTrigger, TriggerType } from '@react-native-firebase/messaging';\n *\n * export class NotifeeLocalNotificationService implements ILocalNotificationService {\n *   async requestPermission(): Promise<boolean> {\n *     const permission = await notifee.requestPermission();\n *     return permission.authorizationStatus === AuthorizationStatus.AUTHORIZED;\n *   }\n *\n *   async scheduleNotification(notification: NotificationSchedule): Promise<void> {\n *     const trigger: TimestampTrigger = {\n *       type: TriggerType.TIMESTAMP,\n *       timestamp: notification.scheduledTime,\n *     };\n *\n *     await notifee.createTriggerNotification(\n *       {\n *         title: notification.title,\n *         body: notification.body,\n *         android: {\n *           channelId: 'default',\n *         },\n *       },\n *       trigger\n *     );\n *   }\n *\n *   async cancelNotification(id: string): Promise<void> {\n *     await notifee.cancelNotification(id);\n *   }\n *\n *   async cancelAllNotifications(): Promise<void> {\n *     await notifee.cancelAllNotifications();\n *   }\n *\n *   async getScheduledNotifications(): Promise<NotificationSchedule[]> {\n *     // 구현 필요\n *     return [];\n *   }\n * }\n */\n\n/**\n * 싱글톤 인스턴스\n */\nlet notificationService: ILocalNotificationService = new MockLocalNotificationService();\n\n/**\n * 로컬 알림 서비스 설정\n */\nexport function setLocalNotificationService(\n  service: ILocalNotificationService\n): void {\n  notificationService = service;\n}\n\n/**\n * 로컬 알림 서비스 조회\n */\nexport function getLocalNotificationService(): ILocalNotificationService {\n  return notificationService;\n}\n\n/**\n * 표준 알림 정의\n */\nexport const StandardNotifications = {\n  // 일일 퀘스트 리셋 리마인더\n  DAILY_QUEST_RESET: {\n    id: 'notification_daily_quest_reset',\n    title: '오늘의 정비 미션!',\n    body: '3분만 같이 할래? 새로운 미션이 기다리고 있어~',\n  },\n\n  // 오프라인 보상 준비\n  OFFLINE_REWARD_READY: {\n    id: 'notification_offline_reward_ready',\n    title: '정비소가 열일했어!',\n    body: '보상 받으러 와~ 설화 파편이 쌓여있어~',\n  },\n\n  // 패스 레벨업 기념\n  PASS_LEVEL_UP: {\n    id: 'notification_pass_level_up',\n    title: '패스 레벨업!',\n    body: '새로운 보상이 준비됐어! 확인해보세요~',\n  },\n\n  // 이벤트 시작\n  EVENT_STARTED: {\n    id: 'notification_event_started',\n    title: '새로운 이벤트!',\n    body: '망각상회 소탕전이 시작됐어! 참여해볼래?',\n  },\n};\n\n/**\n * 편의 함수\n */\nexport async function requestNotificationPermission(): Promise<boolean> {\n  return notificationService.requestPermission();\n}\n\nexport async function scheduleNotification(\n  notification: NotificationSchedule\n): Promise<void> {\n  return notificationService.scheduleNotification(notification);\n}\n\nexport async function cancelNotification(id: string): Promise<void> {\n  return notificationService.cancelNotification(id);\n}\n\nexport async function cancelAllNotifications(): Promise<void> {\n  return notificationService.cancelAllNotifications();\n}\n\nexport async function getScheduledNotifications(): Promise<NotificationSchedule[]> {\n  return notificationService.getScheduledNotifications();\n}\n
