/**\n * 광고 보상(Rewarded Ad) 제공자\n * Mock 구현, 실제 광고 SDK 연동 포인트 포함\n */\n\nexport type AdPlacementId =\n  | 'OFFLINE_DOUBLE'\n  | 'BONUS_CHEST'\n  | 'PASS_XP_BOOST';\n\nexport interface RewardedAdResult {\n  success: boolean;\n  placementId: AdPlacementId;\n  timestamp: number;\n}\n\n/**\n * 광고 보상 제공자 인터페이스\n * 실제 SDK 연동 시 이 인터페이스를 구현\n */\nexport interface IRewardedAdProvider {\n  showRewardedAd(placementId: AdPlacementId): Promise<RewardedAdResult>;\n  isAdAvailable(placementId: AdPlacementId): Promise<boolean>;\n  preloadAd(placementId: AdPlacementId): Promise<void>;\n}\n\n/**\n * Mock 광고 제공자\n * 실제 광고 SDK 없이 테스트 가능\n */\nexport class MockRewardedAdProvider implements IRewardedAdProvider {\n  private loadingTimes: Record<AdPlacementId, number> = {\n    OFFLINE_DOUBLE: 1500,\n    BONUS_CHEST: 1500,\n    PASS_XP_BOOST: 1500,\n  };\n\n  async showRewardedAd(placementId: AdPlacementId): Promise<RewardedAdResult> {\n    // Mock 광고 로딩 시뮬레이션\n    const loadTime = this.loadingTimes[placementId] || 1500;\n    await new Promise((resolve) => setTimeout(resolve, loadTime));\n\n    // 항상 성공 (실패 시뮬레이션은 선택 사항)\n    return {\n      success: true,\n      placementId,\n      timestamp: Date.now(),\n    };\n  }\n\n  async isAdAvailable(placementId: AdPlacementId): Promise<boolean> {\n    // Mock에서는 항상 사용 가능\n    return true;\n  }\n\n  async preloadAd(placementId: AdPlacementId): Promise<void> {\n    // Mock에서는 아무것도 하지 않음\n    return Promise.resolve();\n  }\n}\n\n/**\n * 실제 Google Mobile Ads SDK 연동 (확장 포인트)\n * 주석: 실제 구현 시 다음과 같이 구현할 수 있습니다.\n *\n * import { GoogleMobileAdsSDK } from 'react-native-google-mobile-ads';\n *\n * export class GoogleRewardedAdProvider implements IRewardedAdProvider {\n *   private adUnitIds: Record<AdPlacementId, string> = {\n *     OFFLINE_DOUBLE: 'ca-app-pub-xxxxxxxxxxxxxxxx/yyyyyyyyyy',\n *     BONUS_CHEST: 'ca-app-pub-xxxxxxxxxxxxxxxx/yyyyyyyyyy',\n *     PASS_XP_BOOST: 'ca-app-pub-xxxxxxxxxxxxxxxx/yyyyyyyyyy',\n *   };\n *\n *   async showRewardedAd(placementId: AdPlacementId): Promise<RewardedAdResult> {\n *     try {\n *       const adUnitId = this.adUnitIds[placementId];\n *       const rewardedInterstitialAd = await RewardedInterstitialAd.load(adUnitId, {\n *         requestNonPersonalizedAdsOnly: true,\n *       });\n *\n *       return new Promise((resolve) => {\n *         rewardedInterstitialAd.onAdEvent((type) => {\n *           if (type === AdEventType.EARNED_REWARD) {\n *             resolve({\n *               success: true,\n *               placementId,\n *               timestamp: Date.now(),\n *             });\n *           }\n *         });\n *\n *         rewardedInterstitialAd.show();\n *       });\n *     } catch (error) {\n *       console.error('Failed to show rewarded ad:', error);\n *       return {\n *         success: false,\n *         placementId,\n *         timestamp: Date.now(),\n *       };\n *     }\n *   }\n *\n *   async isAdAvailable(placementId: AdPlacementId): Promise<boolean> {\n *     // 실제 구현: 광고 로드 상태 확인\n *     return true;\n *   }\n *\n *   async preloadAd(placementId: AdPlacementId): Promise<void> {\n *     // 실제 구현: 광고 미리 로드\n *   }\n * }\n */\n\n/**\n * 전역 광고 제공자 인스턴스\n * 앱 시작 시 초기화\n */\nlet adProvider: IRewardedAdProvider = new MockRewardedAdProvider();\n\n/**\n * 광고 제공자 설정\n */\nexport function setRewardedAdProvider(provider: IRewardedAdProvider): void {\n  adProvider = provider;\n}\n\n/**\n * 광고 제공자 조회\n */\nexport function getRewardedAdProvider(): IRewardedAdProvider {\n  return adProvider;\n}\n\n/**\n * 광고 보상 표시\n */\nexport async function showRewardedAd(\n  placementId: AdPlacementId\n): Promise<RewardedAdResult> {\n  return adProvider.showRewardedAd(placementId);\n}\n
