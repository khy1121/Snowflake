/**\n * 주간 이벤트 엔진\n * 리모트 설정 기반 이벤트 관리\n */\n\nexport interface WeeklyEvent {\n  eventId: string;\n  name: string;\n  description: string;\n  type: 'limited_time' | 'recurring';\n  isActive: boolean;\n  startAt: number;\n  endAt: number;\n  durationDays: number;\n  icon: string;\n  rewards: EventReward[];\n  shop: EventShopItem[];\n}\n\nexport interface EventReward {\n  condition: string;\n  rewardType: string;\n  amount: number;\n}\n\nexport interface EventShopItem {\n  shopItemId: string;\n  name: string;\n  description: string;\n  cost: number;\n  costType: string;\n  cosmeticId?: string;\n  rarity: string;\n  quantity: number;\n}\n\nexport interface EventProgress {\n  eventId: string;\n  totalRewards: number;\n  purchasedItems: string[];\n  completedAt?: number;\n}\n\n/**\n * 현재 활성 이벤트 조회\n */\nexport function getActiveEvents(events: WeeklyEvent[]): WeeklyEvent[] {\n  const now = Date.now();\n  return events.filter(\n    (event) =>\n      event.isActive &&\n      event.startAt <= now &&\n      now < event.endAt\n  );\n}\n\n/**\n * 이벤트 진행도 초기화\n */\nexport function initializeEventProgress(eventId: string): EventProgress {\n  return {\n    eventId,\n    totalRewards: 0,\n    purchasedItems: [],\n  };\n}\n\n/**\n * 이벤트 보상 추가\n */\nexport function addEventReward(\n  progress: EventProgress,\n  amount: number\n): EventProgress {\n  return {\n    ...progress,\n    totalRewards: progress.totalRewards + amount,\n  };\n}\n\n/**\n * 이벤트 상점 아이템 구매\n */\nexport function purchaseEventShopItem(\n  progress: EventProgress,\n  itemId: string\n): EventProgress {\n  return {\n    ...progress,\n    purchasedItems: [...progress.purchasedItems, itemId],\n  };\n}\n\n/**\n * 이벤트 완료\n */\nexport function completeEvent(progress: EventProgress): EventProgress {\n  return {\n    ...progress,\n    completedAt: Date.now(),\n  };\n}\n\n/**\n * 이벤트 남은 시간 계산\n */\nexport function getEventTimeRemaining(event: WeeklyEvent): {\n  days: number;\n  hours: number;\n  minutes: number;\n  seconds: number;\n  isExpired: boolean;\n} {\n  const now = Date.now();\n  const remaining = Math.max(0, event.endAt - now);\n  const isExpired = remaining === 0;\n\n  const totalSeconds = Math.floor(remaining / 1000);\n  const days = Math.floor(totalSeconds / (24 * 60 * 60));\n  const hours = Math.floor((totalSeconds % (24 * 60 * 60)) / (60 * 60));\n  const minutes = Math.floor((totalSeconds % (60 * 60)) / 60);\n  const seconds = totalSeconds % 60;\n\n  return { days, hours, minutes, seconds, isExpired };\n}\n\n/**\n * 이벤트 시간 포맷팅\n */\nexport function formatEventTime(event: WeeklyEvent): string {\n  const { days, hours, minutes, isExpired } = getEventTimeRemaining(event);\n\n  if (isExpired) {\n    return '종료됨';\n  }\n\n  if (days > 0) {\n    return `${days}일 ${hours}시간`;\n  }\n\n  return `${hours}시간 ${minutes}분`;\n}\n\n/**\n * 이벤트 진행도 조회\n */\nexport function getEventProgressPercentage(\n  progress: EventProgress,\n  event: WeeklyEvent\n): number {\n  // 간단한 진행도: 구매한 아이템 수 / 총 아이템 수\n  const totalItems = event.shop.length;\n  const purchasedCount = progress.purchasedItems.length;\n  return Math.round((purchasedCount / totalItems) * 100);\n}\n
