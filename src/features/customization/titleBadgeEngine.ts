/**\n * ì¹­í˜¸/ë±ƒì§€ ì—”ì§„\n * ì¹­í˜¸ì™€ ë±ƒì§€ íšë“, ì¥ì°©, í”„ë¡œí•„ í‘œì‹œ\n */\n\nimport { Title, Badge } from '../../types';\n\n/**\n * ì¹­í˜¸ í•´ê¸ˆ ì—¬ë¶€ í™•ì¸\n */\nexport function isTitleUnlocked(\n  titleId: string,\n  unlockedTitles: string[],\n  stage: number,\n  achievements: Record<string, boolean>,\n  episodesWatched: number,\n  companions: string[],\n  modeCompletions: Record<string, number>,\n  leaderboardRank: number | null,\n  comebackCount: number,\n  prestige: number\n): boolean {\n  if (unlockedTitles.includes(titleId)) return true;\n\n  const condition = getTitleUnlockCondition(titleId);\n  if (!condition) return false;\n\n  if (condition === 'start') return true;\n  if (condition.startsWith('stage_')) {\n    const requiredStage = parseInt(condition.split('_')[1]);\n    return stage >= requiredStage;\n  }\n  if (condition.startsWith('achievement_')) {\n    const achievementId = condition.split('_')[1];\n    return achievements[achievementId] === true;\n  }\n  if (condition === 'episode_40') return episodesWatched >= 40;\n  if (condition === 'companion_10') return companions.length >= 10;\n  if (condition === 'achievement_10') {\n    const achievementCount = Object.values(achievements).filter((v) => v).length;\n    return achievementCount >= 10;\n  }\n  if (condition.startsWith('mode_')) {\n    const parts = condition.split('_');\n    const modeId = parts[1];\n    const requiredCount = parseInt(parts[2]);\n    return (modeCompletions[modeId] || 0) >= requiredCount;\n  }\n  if (condition === 'leaderboard_rank1') return leaderboardRank === 1;\n  if (condition === 'comeback_5') return comebackCount >= 5;\n  if (condition.startsWith('prestige_')) {\n    const requiredPrestige = parseInt(condition.split('_')[1]);\n    return prestige >= requiredPrestige;\n  }\n\n  return false;\n}\n\n/**\n * ë±ƒì§€ í•´ê¸ˆ ì—¬ë¶€ í™•ì¸\n */\nexport function isBadgeUnlocked(\n  badgeId: string,\n  unlockedBadges: string[],\n  battleCount: number,\n  totalGold: number,\n  totalFragments: number,\n  upgradeCount: number,\n  questCount: number,\n  friendCount: number,\n  eventCount: number,\n  cosmeticCount: number,\n  dailyStreakDays: number\n): boolean {\n  if (unlockedBadges.includes(badgeId)) return true;\n\n  const condition = getBadgeUnlockCondition(badgeId);\n  if (!condition) return false;\n\n  if (condition === 'battle_1') return battleCount >= 1;\n  if (condition === 'battle_100') return battleCount >= 100;\n  if (condition === 'battle_1000') return battleCount >= 1000;\n  if (condition === 'gold_1m') return totalGold >= 1000000;\n  if (condition === 'fragment_1000') return totalFragments >= 1000;\n  if (condition === 'upgrade_100') return upgradeCount >= 100;\n  if (condition === 'quest_50') return questCount >= 50;\n  if (condition === 'friend_10') return friendCount >= 10;\n  if (condition === 'event_5') return eventCount >= 5;\n  if (condition === 'cosmetic_5') return cosmeticCount >= 5;\n  if (condition === 'daily_7') return dailyStreakDays >= 7;\n  if (condition === 'launch_week') {\n    // ì¶œì‹œ 1ì£¼ì¼ ë‚´ ì‹œì‘ ì¡°ê±´ì€ ë³„ë„ ì²˜ë¦¬\n    return false;\n  }\n\n  return false;\n}\n\n/**\n * ì¹­í˜¸ í•´ê¸ˆ ì¡°ê±´ ê°€ì ¸ì˜¤ê¸°\n */\nexport function getTitleUnlockCondition(titleId: string): string | null {\n  const conditions: Record<string, string> = {\n    novice_technician: 'start',\n    experienced_technician: 'stage_50',\n    master_technician: 'stage_100',\n    legendary_technician: 'stage_150',\n    prestige_awakened: 'prestige_1',\n    tale_collector: 'episode_40',\n    companion_master: 'companion_10',\n    achievement_hunter: 'achievement_10',\n    night_warrior: 'mode_night_maintenance_10',\n    infiltrator: 'mode_infiltration_10',\n    leaderboard_champion: 'leaderboard_rank1',\n    comeback_hero: 'comeback_5',\n  };\n  return conditions[titleId] || null;\n}\n\n/**\n * ë±ƒì§€ í•´ê¸ˆ ì¡°ê±´ ê°€ì ¸ì˜¤ê¸°\n */\nexport function getBadgeUnlockCondition(badgeId: string): string | null {\n  const conditions: Record<string, string> = {\n    first_battle: 'battle_1',\n    hundred_battles: 'battle_100',\n    thousand_battles: 'battle_1000',\n    gold_collector: 'gold_1m',\n    fragment_seeker: 'fragment_1000',\n    upgrade_master: 'upgrade_100',\n    quest_completer: 'quest_50',\n    friend_maker: 'friend_10',\n    event_participant: 'event_5',\n    early_adopter: 'launch_week',\n    daily_player: 'daily_7',\n    cosmetic_enthusiast: 'cosmetic_5',\n  };\n  return conditions[badgeId] || null;\n}\n\n/**\n * ì„ íƒëœ ì¹­í˜¸ ì„¤ì •\n */\nexport function setSelectedTitle(\n  selectedTitle: string | null,\n  titleId: string | null,\n  unlockedTitles: string[]\n): string | null {\n  if (titleId === null) return null;\n  if (!unlockedTitles.includes(titleId)) return selectedTitle; // í•´ê¸ˆë˜ì§€ ì•Šì€ ì¹­í˜¸ëŠ” ì„¤ì • ë¶ˆê°€\n  return titleId;\n}\n\n/**\n * ì„ íƒëœ ë±ƒì§€ ì„¤ì •\n */\nexport function setSelectedBadges(\n  selectedBadges: string[],\n  badgeId: string,\n  unlockedBadges: string[],\n  maxBadges: number = 3\n): string[] {\n  if (!unlockedBadges.includes(badgeId)) return selectedBadges; // í•´ê¸ˆë˜ì§€ ì•Šì€ ë±ƒì§€ëŠ” ì„¤ì • ë¶ˆê°€\n\n  if (selectedBadges.includes(badgeId)) {\n    // ì´ë¯¸ ì„ íƒëœ ë±ƒì§€ë©´ ì œê±°\n    return selectedBadges.filter((b) => b !== badgeId);\n  }\n\n  if (selectedBadges.length >= maxBadges) {\n    // ìµœëŒ€ ê°œìˆ˜ ë„ë‹¬\n    return selectedBadges;\n  }\n\n  return [...selectedBadges, badgeId];\n}\n\n/**\n * ì¹­í˜¸ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\n */\nexport function getTitleInfo(titleId: string): Title | null {\n  const titles: Record<string, Title> = {\n    novice_technician: {\n      id: 'novice_technician',\n      name: 'ì´ˆê¸‰ ê¸°ìˆ ì',\n      description: 'ì •ë¹„ì†Œì— ì…ë¬¸í•œ ì',\n      rarity: 'common',\n      icon: 'ğŸ”§',\n    },\n    experienced_technician: {\n      id: 'experienced_technician',\n      name: 'ìˆ™ë ¨ ê¸°ìˆ ì',\n      description: 'ìŠ¤í…Œì´ì§€ 50 ë„ë‹¬',\n      rarity: 'uncommon',\n      icon: 'ğŸ”¨',\n    },\n    master_technician: {\n      id: 'master_technician',\n      name: 'ë§ˆìŠ¤í„° ê¸°ìˆ ì',\n      description: 'ìŠ¤í…Œì´ì§€ 100 ë„ë‹¬',\n      rarity: 'rare',\n      icon: 'âš’ï¸',\n    },\n    legendary_technician: {\n      id: 'legendary_technician',\n      name: 'ì „ì„¤ì˜ ê¸°ìˆ ì',\n      description: 'ìŠ¤í…Œì´ì§€ 150 ë„ë‹¬',\n      rarity: 'epic',\n      icon: 'ğŸ‘‘',\n    },\n    prestige_awakened: {\n      id: 'prestige_awakened',\n      name: 'ê°ì„±í•œ ì',\n      description: 'Prestige 1íšŒ ë‹¬ì„±',\n      rarity: 'epic',\n      icon: 'âœ¨',\n    },\n  };\n  return titles[titleId] || null;\n}\n\n/**\n * ë±ƒì§€ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\n */\nexport function getBadgeInfo(badgeId: string): Badge | null {\n  const badges: Record<string, Badge> = {\n    first_battle: {\n      id: 'first_battle',\n      name: 'ì²« ì „íˆ¬',\n      description: 'ì²« ì „íˆ¬ ìŠ¹ë¦¬',\n      icon: 'âš”ï¸',\n    },\n    hundred_battles: {\n      id: 'hundred_battles',\n      name: 'ë°±ì „ ë…¸ì¥',\n      description: '100íšŒ ì „íˆ¬ ìŠ¹ë¦¬',\n      icon: 'ğŸ…',\n    },\n    thousand_battles: {\n      id: 'thousand_battles',\n      name: 'ì²œì „ ì „ì‚¬',\n      description: '1000íšŒ ì „íˆ¬ ìŠ¹ë¦¬',\n      icon: 'ğŸ–ï¸',\n    },\n    gold_collector: {\n      id: 'gold_collector',\n      name: 'í™©ê¸ˆ ìˆ˜ì§‘ê°€',\n      description: 'ëˆ„ì  ê³¨ë“œ 1M ë‹¬ì„±',\n      icon: 'ğŸ’°',\n    },\n  };\n  return badges[badgeId] || null;\n}\n
