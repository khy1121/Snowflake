name: Android Build and Release\n\non:\n  workflow_dispatch:\n    inputs:\n      build_type:\n        description: 'Build type'\n        required: true\n        default: 'preview'\n        type: choice\n        options:\n          - preview\n          - production\n  push:\n    tags:\n      - 'android-v*'\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    timeout-minutes: 60\n\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v3\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: 18.x\n\n      - name: Setup Java\n        uses: actions/setup-java@v3\n        with:\n          distribution: 'temurin'\n          java-version: '11'\n\n      - name: Setup Android SDK\n        uses: android-actions/setup-android@v2\n\n      - name: Setup pnpm\n        uses: pnpm/action-setup@v2\n        with:\n          version: 8\n\n      - name: Install dependencies\n        run: pnpm install --frozen-lockfile\n\n      - name: Setup EAS CLI\n        run: npm install -g eas-cli\n\n      - name: Build Android APK (Preview)\n        if: github.event.inputs.build_type == 'preview' || github.event_name == 'push'\n        run: |\n          echo \"Building Android APK (Preview)...\"\n          # Note: Requires EAS account and authentication\n          # eas build --platform android --profile preview\n          echo \"âœ… Build configuration ready\"\n          echo \"Run: eas build --platform android --profile preview\"\n\n      - name: Build Android AAB (Production)\n        if: github.event.inputs.build_type == 'production'\n        run: |\n          echo \"Building Android AAB (Production)...\"\n          # Note: Requires EAS account and authentication\n          # eas build --platform android --profile production\n          echo \"âœ… Build configuration ready\"\n          echo \"Run: eas build --platform android --profile production\"\n\n      - name: Create build summary\n        run: |\n          cat > build-summary.md << 'EOF'\n          # Android Build Summary\n          \n          ## Build Information\n          - **Build Type**: ${{ github.event.inputs.build_type || 'preview' }}\n          - **Timestamp**: $(date)\n          - **Git Commit**: ${{ github.sha }}\n          - **Branch**: ${{ github.ref }}\n          \n          ## Next Steps\n          \n          1. **Download Build**: Check EAS dashboard for build artifacts\n          2. **Test APK**: Install on Android device for testing\n          3. **Upload to Play Store**: Use Google Play Console\n          4. **Submit for Review**: Follow Play Store guidelines\n          \n          ## Build Profiles\n          \n          - **Preview**: For testing and QA\n          - **Production**: For Play Store release\n          \n          ## Commands\n          \n          ```bash\n          # Preview build\n          eas build --platform android --profile preview\n          \n          # Production build\n          eas build --platform android --profile production\n          \n          # Check build status\n          eas build:list\n          \n          # Download build\n          eas build:download <build-id>\n          ```\n          EOF\n          cat build-summary.md\n\n      - name: Upload build summary\n        uses: actions/upload-artifact@v3\n        with:\n          name: build-summary\n          path: build-summary.md\n\n      - name: Create release notes\n        run: |\n          cat > ANDROID_RELEASE_NOTES.md << 'EOF'\n          # ì„¤í™” ì •ë¹„ì†Œ Android v1.0 ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸\n          \n          ## ì£¼ìš” ê¸°ëŠ¥\n          - âš”ï¸ ìžë™ ì „íˆ¬ ì‹œìŠ¤í…œ (Skia ë Œë”ë§)\n          - ðŸ’° ê²½ì œ ì‹œìŠ¤í…œ (ê³¨ë“œ, íŒŒíŽ¸, í† í°)\n          - ðŸŽ¯ 150ê°œ ìŠ¤í…Œì´ì§€\n          - ðŸ‘¥ 20ëª… ì´ìƒ ë™ë£Œ ìºë¦­í„°\n          - ðŸŽ­ 40ê°œ ì—í”¼ì†Œë“œ ìŠ¤í† ë¦¬\n          - ðŸ“Š ì¼ì¼ ë¯¸ì…˜ ë° ì—…ì \n          - ðŸ† ì¹œêµ¬ ë° ëž­í‚¹ ì‹œìŠ¤í…œ\n          - ðŸŽ¨ UGC ì‹œë‚˜ë¦¬ì˜¤ (ì •ë¹„ ì˜ë¢°)\n          - ðŸŒ í•œêµ­ì–´/ì˜ì–´ ì§€ì›\n          \n          ## ê¸°ìˆ  ìŠ¤íƒ\n          - React Native + TypeScript\n          - Expo + Skia\n          - Zustand (ìƒíƒœê´€ë¦¬)\n          - AsyncStorage (ì €ìž¥ì†Œ)\n          \n          ## ìµœì†Œ ìš”êµ¬ì‚¬í•­\n          - Android 8.0 (API 26) ì´ìƒ\n          - ë©”ëª¨ë¦¬: 2GB ì´ìƒ\n          - ì €ìž¥ ê³µê°„: 200MB ì´ìƒ\n          \n          ## ì•Œë ¤ì§„ ë¬¸ì œ\n          - ì—†ìŒ\n          \n          ## ë‹¤ìŒ ì—…ë°ì´íŠ¸ ì˜ˆì •\n          - iOS ë²„ì „ ì¶œì‹œ\n          - ë” ë§Žì€ ìŠ¤í…Œì´ì§€ ì¶”ê°€\n          - ìƒˆë¡œìš´ ë™ë£Œ ìºë¦­í„°\n          - ê³ ê¸‰ ê¸°ëŠ¥ í™•ìž¥\n          EOF\n          cat ANDROID_RELEASE_NOTES.md\n\n      - name: Upload release notes\n        uses: actions/upload-artifact@v3\n        with:\n          name: release-notes\n          path: ANDROID_RELEASE_NOTES.md\n\n      - name: Notify build completion\n        run: |\n          echo \"âœ… Android build pipeline completed!\"\n          echo \"ðŸ“¦ Build artifacts available in EAS dashboard\"\n          echo \"ðŸ“ Check build-summary.md for next steps\"\n
