# GitHub Actions 배포 가이드\n\n## 개요\n\n이 프로젝트는 GitHub Actions를 통해 자동화된 배포 파이프라인을 제공합니다:\n\n1. **웹 배포**: GitHub Pages에 자동 배포\n2. **Android 빌드**: EAS Build를 통한 APK/AAB 생성\n3. **품질 게이트**: PR 검증 및 자동 테스트\n\n---\n\n## 1. 웹 배포 (Web Deploy)\n\n### 파이프라인: `.github/workflows/web-deploy.yml`\n\n### 자동 트리거\n- `main` 브랜치에 push\n- 수동 트리거 (`workflow_dispatch`)\n\n### 배포 프로세스\n\n```\n1. 코드 체크아웃\n   ↓\n2. Node.js 18.x 설정\n   ↓\n3. pnpm 의존성 설치\n   ↓\n4. Expo 웹 빌드 (`expo export --platform web`)\n   ↓\n5. 커스텀 index.html 생성\n   ↓\n6. GitHub Pages 배포\n   ↓\n7. 배포 완료 (자동 URL 생성)\n```\n\n### 배포 URL\n\n```\nhttps://khy1121.github.io/Snowflake\n```\n\n### 배포 결과\n\n- ✅ 웹 프리뷰 페이지 (HTML)\n- ✅ 프로젝트 정보 및 통계\n- ✅ GitHub 리포지토리 링크\n- ✅ 모바일 앱 다운로드 가이드\n\n### 배포 확인\n\n1. GitHub 리포지토리 → **Actions** 탭\n2. **Web Deploy to GitHub Pages** 워크플로우 확인\n3. 최신 실행 상태 확인\n4. 배포 완료 후 위 URL 접속\n\n---\n\n## 2. Android 빌드 (Android Build)\n\n### 파이프라인: `.github/workflows/android-build.yml`\n\n### 수동 트리거\n\n```bash\n# GitHub UI에서 트리거\nActions → Android Build and Release → Run workflow\n\n# 또는 태그로 자동 트리거\ngit tag android-v1.0.0\ngit push origin android-v1.0.0\n```\n\n### 빌드 타입\n\n| 타입 | 용도 | 출력 |\n|------|------|------|\n| **preview** | 테스트/QA | APK |\n| **production** | Play Store | AAB |\n\n### 빌드 프로세스\n\n```\n1. 코드 체크아웃\n   ↓\n2. Node.js + Java 18 설정\n   ↓\n3. Android SDK 설정\n   ↓\n4. pnpm 의존성 설치\n   ↓\n5. EAS CLI 설치\n   ↓\n6. 빌드 타입별 실행\n   - Preview: eas build --platform android --profile preview\n   - Production: eas build --platform android --profile production\n   ↓\n7. 빌드 요약 생성\n   ↓\n8. 아티팩트 업로드\n```\n\n### EAS 설정 (eas.json)\n\n```json\n{\n  \"cli\": {\n    \"version\": \">= 5.0.0\"\n  },\n  \"build\": {\n    \"preview\": {\n      \"android\": {\n        \"buildType\": \"apk\"\n      }\n    },\n    \"production\": {\n      \"android\": {\n        \"buildType\": \"aab\"\n      }\n    }\n  },\n  \"submit\": {\n    \"production\": {\n      \"android\": {\n        \"serviceAccountKeyPath\": \"./google-play-key.json\"\n      }\n    }\n  }\n}\n```\n\n### 빌드 결과\n\n- ✅ EAS 대시보드에서 빌드 상태 확인\n- ✅ 빌드 완료 후 APK/AAB 다운로드\n- ✅ 빌드 요약 및 릴리즈 노트 생성\n\n### EAS 대시보드\n\n```\nhttps://expo.dev/builds\n```\n\n---\n\n## 3. 품질 게이트 (PR Quality Gate)\n\n### 파이프라인: `.github/workflows/pr-quality-gate.yml`\n\n### 자동 트리거\n- PR 생성/업데이트\n\n### 검증 항목\n\n```\n1. TypeScript 타입 체크\n2. ESLint 린트\n3. Jest 유닛 테스트\n4. 빌드 검증\n5. 커버리지 리포트\n```\n\n### PR 체크 결과\n\n- ✅ 모든 체크 통과 시 Merge 가능\n- ❌ 실패 시 수정 후 재시도\n\n---\n\n## 4. 릴리즈 파이프라인 (Release Pipeline)\n\n### 파이프라인: `.github/workflows/release-pipeline.yml`\n\n### 자동 트리거\n- `main` 브랜치에 태그 푸시 (v*.*.* 형식)\n\n### 릴리즈 프로세스\n\n```bash\n# 릴리즈 태그 생성\ngit tag v1.0.0\ngit push origin v1.0.0\n```\n\n### 릴리즈 결과\n\n- ✅ GitHub Release 자동 생성\n- ✅ Changelog 자동 생성\n- ✅ 아티팩트 업로드\n\n---\n\n## 5. 배포 시나리오\n\n### 시나리오 1: 웹 프리뷰 배포\n\n```bash\n# 1. 로컬에서 개발\ngit checkout -b feature/new-feature\n\n# 2. 변경사항 커밋\ngit add .\ngit commit -m \"Add new feature\"\n\n# 3. main에 PR 생성\ngit push origin feature/new-feature\n# GitHub에서 PR 생성\n\n# 4. PR 검증 (자동)\n# - TypeScript 체크\n# - ESLint\n# - 유닛 테스트\n\n# 5. PR 승인 및 Merge\n# GitHub에서 Merge 버튼 클릭\n\n# 6. 웹 배포 자동 시작\n# - 웹 빌드\n# - GitHub Pages 배포\n# - URL: https://khy1121.github.io/Snowflake\n```\n\n### 시나리오 2: Android 빌드 (Preview)\n\n```bash\n# 1. 웹 배포 완료 후\n\n# 2. GitHub Actions 트리거\n# Actions → Android Build and Release → Run workflow\n# Build type: preview\n\n# 3. 빌드 시작\n# - EAS CLI 실행\n# - APK 생성\n# - 빌드 요약 생성\n\n# 4. 빌드 완료\n# - EAS 대시보드에서 APK 다운로드\n# - 테스트 기기에 설치\n# - QA 테스트\n```\n\n### 시나리오 3: Android 빌드 (Production)\n\n```bash\n# 1. QA 테스트 완료 후\n\n# 2. GitHub Actions 트리거\n# Actions → Android Build and Release → Run workflow\n# Build type: production\n\n# 3. 빌드 시작\n# - EAS CLI 실행\n# - AAB 생성\n# - 릴리즈 노트 생성\n\n# 4. 빌드 완료\n# - EAS 대시보드에서 AAB 다운로드\n# - Google Play Console에 업로드\n# - 스토어 심사 제출\n```\n\n### 시나리오 4: 릴리즈 태그\n\n```bash\n# 1. Production 빌드 완료 후\n\n# 2. 릴리즈 태그 생성\ngit tag v1.0.0\ngit push origin v1.0.0\n\n# 3. 릴리즈 파이프라인 자동 시작\n# - Changelog 생성\n# - GitHub Release 생성\n# - 아티팩트 업로드\n\n# 4. GitHub Releases에서 확인\n# https://github.com/khy1121/Snowflake/releases\n```\n\n---\n\n## 6. 환경 변수 및 시크릿\n\n### 필요한 시크릿 설정\n\n#### GitHub Settings → Secrets and variables → Actions\n\n| 이름 | 설명 | 예시 |\n|------|------|------|\n| `EAS_TOKEN` | EAS CLI 인증 토큰 | `eas_...` |\n| `GOOGLE_PLAY_KEY` | Google Play 서비스 계정 키 (JSON) | `{\"type\": \"service_account\", ...}` |\n\n### 설정 방법\n\n```bash\n# 1. EAS 토큰 생성\neas login\neas secrets:create --scope project --name EAS_TOKEN\n\n# 2. GitHub에 추가\n# Settings → Secrets and variables → Actions → New repository secret\n# Name: EAS_TOKEN\n# Value: <eas-token>\n\n# 3. Google Play 키 추가\n# Settings → Secrets and variables → Actions → New repository secret\n# Name: GOOGLE_PLAY_KEY\n# Value: <json-key-content>\n```\n\n---\n\n## 7. 모니터링 및 디버깅\n\n### 워크플로우 상태 확인\n\n```\nGitHub → Actions → 워크플로우 선택 → 실행 기록\n```\n\n### 로그 확인\n\n```\n실행 선택 → 작업 선택 → 로그 확인\n```\n\n### 일반적인 문제\n\n| 문제 | 해결 |\n|------|------|\n| 빌드 실패 | 로그 확인 → 의존성 설치 → 재시도 |\n| 배포 실패 | GitHub Pages 설정 확인 → 브랜치 확인 |\n| EAS 인증 실패 | EAS_TOKEN 시크릿 확인 → 토큰 갱신 |\n\n---\n\n## 8. 다음 단계\n\n### 웹 배포 완료 후\n\n1. ✅ 웹 프리뷰 URL 공유\n2. ✅ 사용자 피드백 수집\n3. ✅ 필요시 수정 및 재배포\n\n### Android 빌드 완료 후\n\n1. ✅ APK/AAB 다운로드\n2. ✅ 테스트 기기에 설치\n3. ✅ QA 테스트 실행\n4. ✅ Google Play Console에 업로드\n5. ✅ 스토어 심사 제출\n6. ✅ 출시\n\n---\n\n**Last Updated**: January 2025\n**Version**: 1.0\n
